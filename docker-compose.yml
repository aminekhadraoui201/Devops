version: "3.3"
services:
  tp-foyer:
    build: C:\Users\ASUS\Desktop\Devops
    environment:
      - SPRING_DATASOURCE_URL=jdbc:mysql://docker-mysql:3306/db?autoReconnect=true&useSSL=false
      - SPRING_DATASOURCE_USERNAME=root
      - SPRING_DATASOURCE_PASSWORD=
    ports:
      - "8089:8089"
    image: "youssefkchaou/tp-foyer"  # Nom d'image en minuscule
    depends_on:
      - docker-mysql

  docker-mysql:
    image: "mysql:5.6"
    environment:
      - MYSQL_ROOT_PASSWORD=
      - MYSQL_DATABASE=db
      - MYSQL_ALLOW_EMPTY_PASSWORD=yes
    ports:
      - 3306:3306

